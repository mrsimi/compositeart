{% extends 'base.html' %}

{% block content %}


<div class="container">
    <div class="firstpart">
        <p style="font-family: 'Ojuju', sans-serif;">make your photos fun</p>
        <p class="heading">Make Stunning Photo Mosaic with diverse Composition</p>
        <p class="info">Turn your favorite photos into stunning mosaics with our easy-to-use photo mosaic app. <br>
            <br>
            Select any image from your gallery to be the focal point of your mosaic.
            Select from the composition option and enjoy stunning results.</p>
            <form  id="index" action="/" method="post" enctype="multipart/form-data">
                <label for="">select image:</label> <br>
                <input  id="single_file" type="file" name="single_file" onchange="validateSize(this)" accept="image/*"
                required> <br> <br>
                <span id="errorMessage" style="color: yellow;"></span> <br>
                <label>select composition: </label> <br>
                <select id="selected_filter" name="selected_filter">
                    <option value="ascii">ascii</option>
                    <!-- <option value="emoji">emoji</option> -->
                </select> <br> <br>
                <input type="submit" value="generate mosaic" class="submit-btn"/>
            </form>

            <p style="padding: 50px 0px;">This app was created by <a href="https://twitter.com/0xfatherstreet">simi</a></span></p>
    </div>
    <div class="secondpart">
        <div>
            <a class="feedback-btn" href="mailto:simi.photomosaic@gmail.com?Subject=Feedback%20for%20Photo%20Mosaic%20Creator">Give Feedback</a> <br>
        </div>

    <img class="sample-image" src="{{ url_for('static', filename='mosaic.jpg') }}">
    </div>
</div>

<script>
    document.getElementById('single_file').addEventListener('change', function(event) {
        const file = event.target.files[0];
        const maxSizeInBytes = 2 * 1024 * 1024; // 2MB in bytes

        if (file) {
            if (file.size > maxSizeInBytes) {
                document.getElementById('errorMessage').textContent = 
                    'File size exceeds 2MB. Please select a smaller file.';
                event.target.value = ''; // Clear the input
            } else {
                const fileSizeInBytes = file.size;
                const fileSizeInKB = (fileSizeInBytes / 1024).toFixed(2);
                const fileSizeInMB = (fileSizeInBytes / (1024 * 1024)).toFixed(2);
                document.getElementById('errorMessage').textContent = '';
            }
        } else {
            document.getElementById('fileSize').textContent = 'No file selected.';
            document.getElementById('errorMessage').textContent = '';
        }
    });
   
</script>

{% endblock %}